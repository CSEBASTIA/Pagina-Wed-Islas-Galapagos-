erDiagram
    %% 1. TABLAS MAESTRAS
    CATEGORIAS {
        int id PK
        string nombre
    }

    TOURS {
        int id PK
        int categoria_id FK
        string titulo
        decimal precio_base
    }

    USUARIOS {
        int id PK
        string email
        string rol "ADMIN/CLIENTE"
    }

    %% 2. MAESTRAS OPERATIVAS (Inventario)
    SALIDAS {
        int id PK
        int tour_id FK
        datetime fecha_salida
        int cupo_disponible
        decimal precio_actual
    }

    %% 3. MAESTRA TRANSACCIONAL (Ventas)
    RESERVAS {
        int id PK
        int usuario_id FK
        int salida_id FK
        string estado "PENDIENTE/CONFIRMADA"
        decimal monto_total
    }

    %% 4. TRANSACCIONALES DE DETALLE
    PASAJEROS {
        int id PK
        int reserva_id FK
        string nombre_completo
        string dni_pasaporte
    }

    PAGOS {
        int id PK
        int reserva_id FK
        decimal monto
        string metodo
    }

    %% RELACIONES (Lectura de la "Pata de Gallo")

    CATEGORIAS ||--|{ TOURS : "clasifica a"
    %% Una Categoría tiene MUCHOS Tours (||--|{)
    %% Un Tour pertenece a UNA Categoría

    TOURS ||--o{ SALIDAS : "genera"
    %% Un Tour tiene MUCHAS Salidas programadas (||--o{)
    %% Una Salida pertenece a UN Tour

    SALIDAS ||--o{ RESERVAS : "recibe"
    %% Una Salida tiene MUCHAS Reservas (||--o{)
    %% Una Reserva es para UNA Salida específica

    USUARIOS ||--o{ RESERVAS : "realiza"
    %% Un Usuario puede hacer MUCHAS Reservas (||--o{)
    %% Una Reserva pertenece a UN Usuario

    RESERVAS ||--|{ PASAJEROS : "contiene"
    %% Una Reserva tiene 1 o MÁS Pasajeros (||--|{)
    %% Un Pasajero pertenece a UNA Reserva

    RESERVAS ||--o{ PAGOS : "tiene"
    %% Una Reserva puede tener MUCHOS Pagos (abonos) (||--o{)
    %% Un Pago pertenece a UNA Reserva